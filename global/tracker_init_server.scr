// ============================================================================
// OpenMOHAA Telemetry Tracker - Server Initialization
// Subscribes to Server, Map, Game Flow, World, and Bot/Actor events
// ============================================================================

init:
    println "Initializing Server Event Subscriptions..."

    // ========================================================================
    // GAME FLOW (11 events)
    // ========================================================================
    event_subscribe "game_init" "global/tracker_gameflow_ext.scr::on_game_init"
    event_subscribe "game_start" "global/tracker_gameflow_ext.scr::on_game_start"
    event_subscribe "game_end" "global/tracker_gameflow_ext.scr::on_game_end"
    event_subscribe "round_start" "global/tracker_gameflow_ext.scr::on_round_start"
    event_subscribe "round_end" "global/tracker_gameflow_ext.scr::on_round_end"
    event_subscribe "team_win" "global/tracker_gameflow_ext.scr::on_team_win"
    event_subscribe "match_end" "global/tracker_gameflow_ext.scr::on_match_end"
    event_subscribe "intermission_start" "global/tracker_gameflow_ext.scr::on_intermission_start"
    event_subscribe "warmup_start" "global/tracker_gameflow_ext.scr::on_warmup_start"
    event_subscribe "warmup_end" "global/tracker_gameflow_ext.scr::on_warmup_end"
    event_subscribe "objective_update" "global/tracker_gameflow_ext.scr::on_objective_update"

    // ========================================================================
    // SERVER & MAP LIFECYCLE (Centralized in tracker.scr)
    // ========================================================================
    
    event_subscribe "server_console_command" "global/tracker_gameflow_ext.scr::on_server_console_command"

    // ========================================================================
    // MAP EVENTS (4 events)
    // ========================================================================
    event_subscribe "map_load_start" "global/tracker_gameflow_ext.scr::on_map_load_start"
    event_subscribe "map_load_end" "global/tracker_gameflow_ext.scr::on_map_load_end"
    event_subscribe "map_change_start" "global/tracker_gameflow_ext.scr::on_map_change_start"
    event_subscribe "map_restart" "global/tracker_gameflow_ext.scr::on_map_restart"

    // ========================================================================
    // WORLD EVENTS (3 events)
    // ========================================================================
    event_subscribe "door_open" "global/tracker_world_ext.scr::on_door_open"
    event_subscribe "door_close" "global/tracker_world_ext.scr::on_door_close"
    event_subscribe "explosion" "global/tracker_world_ext.scr::on_explosion"

    // ========================================================================
    // AI/ACTOR EVENTS (7 events)
    // ========================================================================
    event_subscribe "actor_spawn" "global/tracker_bot_ext.scr::on_actor_spawn"
    event_subscribe "actor_killed" "global/tracker_bot_ext.scr::on_actor_killed"
    event_subscribe "bot_spawn" "global/tracker_bot_ext.scr::on_bot_spawn"
    event_subscribe "bot_killed" "global/tracker_bot_ext.scr::on_bot_killed"
    event_subscribe "bot_roam" "global/tracker_bot_ext.scr::on_bot_roam"
    event_subscribe "bot_curious" "global/tracker_bot_ext.scr::on_bot_curious"
    event_subscribe "bot_attack" "global/tracker_bot_ext.scr::on_bot_attack"

    println "Server Event Subscriptions Complete."
end
