// ============================================================================
// Fix Verification Script
// ============================================================================

main:
    conprintf "=============================================="
    conprintf "Verifying build_player_payload robustness..."
    conprintf "=============================================="

    // Test Case 1: NIL
    local.res = waitthread global/tracker_common.scr::build_player_payload NIL "test"
    if (local.res == "") { conprintf "PASS: NIL handled" } else { conprintf "FAIL: NIL returned data: " local.res }

        // Test Case 2: -1 (The suspected culprit)
    local.res = waitthread global/tracker_common.scr::build_player_payload -1 "test"
    if (local.res == "") { conprintf "PASS: -1 handled" } else { conprintf "FAIL: -1 returned data: " local.res }

        // Test Case 3: 0
    local.res = waitthread global/tracker_common.scr::build_player_payload 0 "test"
    if (local.res == "") { conprintf "PASS: 0 handled" } else { conprintf "FAIL: 0 returned data: " local.res }

        // Test Case 4: String
    local.res = waitthread global/tracker_common.scr::build_player_payload "not_a_player" "test"
    if (local.res == "") { conprintf "PASS: String handled" } else { conprintf "FAIL: String returned data: " local.res }

        conprintf "=============================================="
    conprintf "Verification Complete"
    conprintf "=============================================="
end
