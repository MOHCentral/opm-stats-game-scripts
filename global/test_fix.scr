// ============================================================================
// Fix Verification Script
// ============================================================================

main:
    dprintln "=============================================="
    dprintln "Verifying build_player_payload robustness..."
    dprintln "=============================================="

    // Test Case 1: NIL
    local.res = waitthread global/tracker_common.scr::build_player_payload NIL "test"
    if (local.res == "") { dprintln "PASS: NIL handled" } else { dprintln "FAIL: NIL returned data: " local.res }

        // Test Case 2: -1 (The suspected culprit)
    local.res = waitthread global/tracker_common.scr::build_player_payload -1 "test"
    if (local.res == "") { dprintln "PASS: -1 handled" } else { dprintln "FAIL: -1 returned data: " local.res }

        // Test Case 3: 0
    local.res = waitthread global/tracker_common.scr::build_player_payload 0 "test"
    if (local.res == "") { dprintln "PASS: 0 handled" } else { dprintln "FAIL: 0 returned data: " local.res }

        // Test Case 4: String
    local.res = waitthread global/tracker_common.scr::build_player_payload "not_a_player" "test"
    if (local.res == "") { dprintln "PASS: String handled" } else { dprintln "FAIL: String returned data: " local.res }

        dprintln "=============================================="
    dprintln "Verification Complete"
    dprintln "=============================================="
end
