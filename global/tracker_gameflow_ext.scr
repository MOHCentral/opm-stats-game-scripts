// ============================================================================
// OpenMOHAA Telemetry Tracker - Game Flow Extensions
// ============================================================================

on_intermission_start local.type:
    local.payload = global/tracker_common.scr::build_base_payload "intermission_start"
    local.payload = local.payload + "&gametype=" + local.type

    thread global/tracker_common.scr::queue_event local.payload
end

on_warmup_start:
    local.payload = global/tracker_common.scr::build_base_payload "warmup_start"

    thread global/tracker_common.scr::queue_event local.payload
end

on_warmup_end:
    local.payload = global/tracker_common.scr::build_base_payload "warmup_end"

    thread global/tracker_common.scr::queue_event local.payload
end

on_objective_capture local.obj local.team:
    local.payload = global/tracker_common.scr::build_base_payload "objective_capture"
    local.payload = local.payload + "&objective_name=" + local.obj
    local.payload = local.payload + "&team=" + local.team

    thread global/tracker_common.scr::queue_event local.payload
end

on_map_ready local.map local.gametype:
    local.payload = global/tracker_common.scr::build_base_payload "map_ready"
    local.payload = local.payload + "&map=" + local.map
    local.payload = local.payload + "&gametype=" + local.gametype

    thread global/tracker_common.scr::queue_event local.payload
end

on_server_console_command local.cmd:
    local.payload = global/tracker_common.scr::build_base_payload "server_console_command"
    local.payload = local.payload + "&command=" + local.cmd

    thread global/tracker_common.scr::queue_event local.payload
end

on_map_restart:
    local.payload = global/tracker_common.scr::build_base_payload "map_restart"
    local.payload = local.payload + "&map=" + level.map_name

    thread global/tracker_common.scr::queue_event local.payload
end

on_game_init local.gametype:
    local.payload = global/tracker_common.scr::build_base_payload "game_init"
    local.payload = local.payload + "&gametype=" + local.gametype

    thread global/tracker_common.scr::queue_event local.payload
end

on_game_start:
    local.payload = global/tracker_common.scr::build_base_payload "game_start"

    thread global/tracker_common.scr::queue_event local.payload
end

on_game_end:
    local.payload = global/tracker_common.scr::build_base_payload "game_end"

    thread global/tracker_common.scr::queue_event local.payload
end

on_round_start:
    local.payload = global/tracker_common.scr::build_base_payload "round_start"
    local.payload = local.payload + "&round_number=" + level.round_number

    thread global/tracker_common.scr::queue_event local.payload
end

on_round_end:
    local.payload = global/tracker_common.scr::build_base_payload "round_end"
    local.payload = local.payload + "&round_number=" + level.round_number

    thread global/tracker_common.scr::queue_event local.payload
end

on_team_win local.teamnum:
    local.payload = global/tracker_common.scr::build_base_payload "team_win"
    local.payload = local.payload + "&teamnum=" + local.teamnum

    thread global/tracker_common.scr::queue_event local.payload
end

on_objective_update local.index local.status:
    local.payload = global/tracker_common.scr::build_base_payload "objective_update"
    local.payload = local.payload + "&objective_index=" + local.index
    local.payload = local.payload + "&objective_status=" + local.status

    thread global/tracker_common.scr::queue_event local.payload
end

on_map_load_start local.map_name:
    local.payload = global/tracker_common.scr::build_base_payload "map_load_start"
    local.payload = local.payload + "&map=" + local.map_name

    thread global/tracker_common.scr::queue_event local.payload
end

on_map_load_end local.map_name:
    local.payload = global/tracker_common.scr::build_base_payload "map_load_end"
    local.payload = local.payload + "&map=" + local.map_name

    thread global/tracker_common.scr::queue_event local.payload
end

on_map_change_start local.new_map:
    local.payload = global/tracker_common.scr::build_base_payload "map_change_start"
    local.payload = local.payload + "&new_map=" + local.new_map

    thread global/tracker_common.scr::queue_event local.payload
end

on_map_init local.gametype:
    local.payload = global/tracker_common.scr::build_base_payload "map_init"
    local.payload = local.payload + "&gametype=" + local.gametype

    thread global/tracker_common.scr::queue_event local.payload
end

on_map_start:
    local.payload = global/tracker_common.scr::build_base_payload "map_start"

    thread global/tracker_common.scr::queue_event local.payload
end

on_map_shutdown local.reason:
    local.payload = global/tracker_common.scr::build_base_payload "map_shutdown"
    local.payload = local.payload + "&reason=" + local.reason

    thread global/tracker_common.scr::queue_event local.payload
end
